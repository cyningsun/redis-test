# Background

In production environments, it is often found that the memory usage of different shards in Redis clusters is uneven. This is because the data distribution of Redis clusters is based on hash slot. If the hash slot is not evenly distributed, the memory usage of different shards will be likely uneven. 

# Function

This tool can be used to calculate and print the number of slots in each shard. 

# Usage

```sh
make build

./build/slotcount <ip:port>
```

# Example

```sh
./build/slotcount 10.192.76.54:6379
node_id	node_addr	slot_count	slot_range
385edf02183647a4305cadf50d2a87516703d73f	10.192.83.115:6379	934	[0-0] [6554-6554] [7260-8191]
721ab9f4f5a1bf43fc47554a2fc58dde391a9df2	10.192.68.54:6379	547	[1-2] [2185-2729]
98768f188a14fe721caf95a5c19cd16bb719fce4	10.192.68.135:6379	546	[3-548]
6410fb54e9ec255a55b53218b76f3f7c1c05fb6b	10.192.95.134:6379	544	[549-1092]
0a8c53e7178180faa00bdb34f9f5bb08b681aa32	10.192.71.115:6379	547	[1093-1637] [3277-3278]
c7e9c024ebfdb81bce7ee020f8774701bae7b50f	10.192.84.29:6379	547	[1638-2184]
625d4e3e0de9743433a1138b4a944fb07d8d7da5	10.192.66.184:6379	547	[2730-3276]
9ba589c5fb94313606a08dd529b825da979623ec	10.192.65.156:6379	76	[3279-3279] [5463-5537]
66690cd876841f08d471258389cb2be84158b6df	10.192.81.215:6379	546	[3280-3825]
74614d0cb5750352ebbf9ab2adb8a5de483a69ef	10.192.68.166:6379	405	[3826-4230]
b6a608bed0524d860d37c8fc2b7bb374c1280294	10.192.95.4:6379	686	[4231-4915] [9831-9831]
3fa02ac40d47c246a665fb4add93631e46ab86f4	10.192.66.231:6379	1017	[4916-4916] [5538-6553]
08cdd2f6a08cfcadb914970400a614f477f36deb	10.192.78.198:6379	546	[4917-5462]
d630cd1e1f62594a310e422ef01abe079f3c4d9f	10.192.80.123:6379	546	[6555-7100]
ecbfcc1942341864733a9bc3daeac7f1bed6c091	10.192.81.107:6379	159	[7101-7259]
04db9d409e0c14fb612328be9dd49203470e010c	10.192.69.130:6379	546	[8192-8308] [8856-9284]
9a2730dcfc1aff89e2194472f51fc85e5bf69031	10.192.90.99:6379	546	[8309-8309] [12017-12561]
e954146ff918a411dafb1da4214554ad0677ef42	10.192.83.12:6379	546	[8310-8855]
f6974b945844a6f1998b6240793d1c1c25330dd1	10.192.73.216:6379	546	[9285-9830]
f79bd39d3d47eddec22c7f2505105ce705101811	10.192.71.200:6379	1	[9832-9832]
d0cea64cf8a7b85eff5e2cf288a4f43485f66563	10.192.95.99:6379	546	[9833-10378]
59597b0c89d673f4cb225f902e6ce38d2d2cc739	10.192.64.222:6379	88	[10379-10465] [13108-13108]
a2854b8e6bb6821afad961e51651c9404a819c07	10.192.84.227:6379	1004	[10466-11469]
c6f413eec839e8cc0bae5b523d7baf42a088e20e	10.192.86.187:6379	238	[11470-11470] [13655-13891]
f8e862eea4112020b0b9852bb14ef36518b636c0	10.192.72.234:6379	546	[11471-12016]
8b5b14fca8674020b36ae1e9de0da5e587dddb45	10.192.94.199:6379	546	[12562-13107]
0485624dd9aff7b9ff698d4fa38328d3ee79cac0	10.192.69.61:6379	546	[13109-13654]
7680e5d530d1053bcbeed075e7b439ccae213e2a	10.192.64.67:6379	854	[13892-14745]
14f6905e0e069b51a00d1eca538ea34455e3779c	10.192.89.171:6379	1485	[14746-14746] [14900-16383]
216141d41a5ed1e4433217ab7c509daccc01ddc2	10.192.82.75:6379	153	[14747-14899]
```